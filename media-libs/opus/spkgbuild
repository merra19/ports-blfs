# description	: Open codec for interactive speech and music transmission over the Internet
# depends	: glibc

name=opus
version=1.5.2
release=1
options="!lto"
source=" https://downloads.xiph.org/releases/opus/$name-$version.tar.gz"

build() {
	cd $name-$version

    if echo "$CFLAGS" | grep -q "\-Ofast"; then

        meson setup \
            --prefix=/usr \
            --buildtype=plain \
            -D float-approx=true \
            -D intrinsics=enabled \
            -D docdir=/usr/share/doc/$name-$version \
            build
        ninja -C build
    else
        meson setup \
            --prefix=/usr \
            --buildtype=plain \
            -D docdir=/usr/share/doc/$name-$version \
            build
        ninja -C build
    fi
}

package() {
    cd $name-$version

    DESTDIR="$PKG" ninja -C build install
}